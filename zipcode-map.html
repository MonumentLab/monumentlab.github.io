---
layout: mapit
title: Zipcode Map
permalink: /zipcodemap
---

<div id='map'></div>
<div id="infobox">But here should everything appear</div>

<script src="assets/js/proposals.js" type="text/javascript"></script>
<script src="assets/js/neighborhoods.js" type="text/javascript"></script>
<!-- <script src="assets/js/phillystreets_zipcodes_poly.js" type="text/javascript"></script> -->
<script src="assets/js/zipcodes.js" type="text/javascript"></script>

<script>
	var map = L.map('map').setView([39.93, -75.13], 11);

	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.light'
	}).addTo(map);

  //neighborhoods layer
  // var neighborhoodsStyle = {"color": "#ff6a39", "opacity": 0.8, "fillOpacity": 0.45, "weight": 1};
  // var neighborhoodsLayer = L.geoJson(neighborhoods, {style: neighborhoodsStyle}).addTo(map);
  // map.fitBounds(neighborhoodsLayer.getBounds(), {padding: [10, 10]});

 // zipcodes layer
 var zipcodesStyle = {"color": "#000000", "opacity": 0.5, "fillOpacity": 0.45, "weight": 2};
 var zipcodesLayer = L.geoJson(zipcodes, {style: zipcodesStyle}).addTo(map);
 map.fitBounds(zipcodesLayer.getBounds(), {padding: [10, 10]});

 	// get color depending on population density value
 	function getColor(d) {
 		return d > 1000 ? '#ff6a39' :
 							'#ff6a39';
 	}

 	function style(feature) {
 		return {
 			weight: 2,
 			opacity: 1,
 			color: 'white',
 			dashArray: '3',
 			fillOpacity: 0.7,
 			fillColor: getColor(feature.properties.code)
 		};
 	}

 	function highlightFeature(e) {
 		var layer = e.target;

 		layer.setStyle({
 			weight: 5,
 			color: '#666',
 			dashArray: '',
 			fillOpacity: 0.7
 		});

 		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
 			layer.bringToFront();
 		}

 		info.update(layer.feature.properties);
 	}

 	var geojson;

 	function resetHighlight(e) {
 		geojson.resetStyle(e.target);
 		info.update();
 	}

 	function zoomToFeature(e) {
 		map.fitBounds(e.target.getBounds());
 	}

 	function onEachFeature(feature, layer) {
 		layer.on({
 			mouseover: highlightFeature,
 			mouseout: resetHighlight,
 			click: zoomToFeature
 		});
 	}

 	geojson = L.geoJson(zipcodes, {
 		style: style,
 		onEachFeature: onEachFeature
 	}).addTo(map);

	// control that shows state info on hover
 var info = L.control();

 info.onAdd = function (map) {
		 this.info = L.DomUtil.get("infobox"); // get that DIV
		 this.update();
		 return this._div;
 };

 // method that we will use to update the control based on feature properties passed
 info.update = function (props) {
		 this.info.innerHTML = '<h1>Philadelphia Zipcode</h1>' +  (props ?'<b>' + props.CODE + '</b><br />' + props.density + ' people / mi<sup>2</sup>': 'Hover over a zipcode');
		 };
 // info.onAdd = function (map) {
 // 	this._div = L.DomUtil.create('div', 'info');
 // 	this.update();
 // 	return this._div;
 // };

 // info.update = function (props) {
 // 	this._div.innerHTML = '<h1>Philadelphia Zipcode</h1>' +  (props ?
 // 		'<b>' + props.CODE + '</b><br />' + props.density + ' people / mi<sup>2</sup>'
 // 		: 'Hover over a zipcode');
 // };

 info.addTo(map);





</script>
